:8080 {
    root * dist
    file_server
    try_files {path} /index.html

    # Proxy API
    reverse_proxy /api/* http://54.151.167.190:8080

    # Proxy WebSocket đặc trị cho SockJS/STOMP
    reverse_proxy /ws/* http://54.151.167.190:8080 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up Connection {>Connection}
        header_up Upgrade {>Upgrade}
        
        # Tắt đệm để SockJS không bị timeout
        flush_interval -1
    }
}